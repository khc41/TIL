## 📅 2025-03-11
### 📖 읽은 블로그: [Garbage Collection 모니터링 방법](https://d2.naver.com/helloworld/6043)
#### ✏️ 세 줄 요약
- GC 모니터링이란 JVM이 어떻게 GC를 수행하고 있는지 알아내는 과정을 말하고, GC 모니터링으로 파악한 정보를 바탕으로 애플리케이션을 수정하거나 GC 방법을 변경(GC 튜닝)할 수 있다.
- GC를 모니터링하는 방법에는 여러 가지 방법이 있지만, GC 수행 정보를 사용자에게 보여주는 방법만 다르므로, 여러 방법을 익혀 둔다면 환경과 상황에 따라 적합한 GC 모니터링 방식을 빠르게 쓸 수 있을 것이다.
- -verbosegc 옵션은 시작할 때 지정해아 하는데 직관적으로 이해하기 쉬운 출력 결과를 GC가 발생할 때마다 보여 주기 때문에 개략적인 GC 정보를 모니터링할 때에는 아주 좋다.
#### 💡 느낀 점
- GC 모니터링 툴보단 GC의 본질적인 부분에 대해서 알 필요가 있다고 느꼈고, GC로그를 분석해서 실제 성능 개선으로 이어보고 싶다. 
- 오늘 봤는데 블로그 글이 12년도 글이였다. 소프트웨어는 변화가 빠르므로 무조건적으로 받아들이기 보단 의심하면서 받아들여야할 필요를 느꼈다.

---

### 🎥 시청한 컨퍼런스 영상: [카카오페이는 어떻게 수천만 결제를 처리할까? 우아한 결제 분산락 노하우 / if(kakaoAI)2024](https://www.youtube.com/watch?v=4wGTavSyLxE)
#### ✏️ 세 줄 요약
- 동시성 이슈를 해결하기 위해 Redis의 redisson을 통해 분산락을 구현했다.
- 스프링 AOP로 커스텀 애노테이션을 통해 분산락을 구현했는데, 컴파일 타임에 검출이 안되고 파라미터 적용이 까다롭고 락의 장시간 점유와 리팩터링, 프록시 기반이기 때문에 private 메서드에 적용하는 것 등에 어려움이 있었다.
- 함수형 분산락으로 데코레이터 패턴을 사용해 위의 모든 문제를 해결했고 수천만 건의 결제를 빠르고 안전하게 처리하고 있다.
#### 💡 느낀 점
- 사실 분산락을 개념만 알고 있었고, 적용하는 부분은 실제로 처음 봤는데 막상 구현하라하면 AOP와 커스텀 애노테이션을 활용한 방식으로 구현했을 것 같다.
- 하지만, 이 방식은 위와 같이 여러 문제가 있었고, 특히 크리티컬 섹션을 이용하지 않는 부분도 같이 락에 걸린다는 문제가 있다는 것을 느꼈다.
- 예제 코드로 동시성 테스트를 해보면서 문제 상황을 재현해보고, redisson 분산락과 데코레이터 패턴까지 적용해볼 계획이다.
- 파라미터의 첫 번째를 key로 지정해서 문제가 생긴 부분은 커스텀 애노테이션의 value 등을 사용하면 해결할 수 있을것 같단 생각이 들었다.