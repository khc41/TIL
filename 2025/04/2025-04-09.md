## 📅 2025-04-09
### 📖 읽은 블로그: [Hibernate Fetch Join시 메모리에서 페이징 처리 사전 차단하기](https://jojoldu.tistory.com/737)
#### ✏️ 세 줄 요약
- 페이징 처리할 때 여러 엔티티를 Fetch Join하게 되면 페이징이 전혀 적용되지 않고 모든 데이터를 메모리에 올려두고 사용한다.
- fail_on_pagination_over_collection_fetch 옵션을 사용하면 메모리 상에서 페이징으로 가져오려고 할 때 에러를 발생시킨다.
- 소량의 데이터만을 활용할 여지가 있는 API 에서는 이 옵션을 강제화할 순 없지만, 대량의 데이터를 처리하는 Batch 에서는 옵션을 활성화 시키는 편이 좋다.
#### 💡 느낀 점
- 최근에 조회 API를 개발해야하는데 Fetch Join + Paging을 해야하는 상황이 생겼다. 
- '단순하게 엔티티를 Fetch Join하고 Paging하면 되는 거 아닌가?'라고 생각했지만 실제로 성능상의 이슈를 발생시킬 수도 있었다.
- 좀 더 찾아보니 이러한 경우엔 지연 로딩과 batch size를 활용해 페이징 대상이되는 엔티티만 select하고 나머지 엔티티들은 batch size를 통해 N+1 문제를 예방할 수 있다고 확인했다. 
- 이러한 개선 방법을 통해 성능 상의 문제도 해결할 수 있을 것이라 생각됐다.
