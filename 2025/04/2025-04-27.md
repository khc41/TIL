## 📅 2025-04-27
### 📖 읽은 블로그: [Storm과 Elasticsearch Percolator를 이용한 NELO2 알람 기능 개선](https://d2.naver.com/helloworld/1044388)
#### ✏️ 세 줄 요약
- 기존 NELO2 알림 기능은 사용자의 알람 규칙 갱신이 실시간으로 서버에 반영되지 않고 알람도 실시간으로 전송이 불가능했다. 또한, 검색에서 입력하는 질의어와 알람에서 설정하는 질의어의 형식이 달라 어려움이 있었다.
- 이러한 문제를 해결하기 위해, 수신단에서 알람 관련 작업을 처리하지 않고 메시징 큐로 보내는 역할만 수행한다. 알라멩 관련된 기능은 Storm에서 모두 처리하는데 Elasticsearch의 percolator 기능을 활용해 질의어 형식 문제를 해결했다.
- 로그에 매치되는 규칙이 있으면 규칙 아이디 값을 가져와 해당 로그의 타임 스탬프를 Redis의 SortedSet으로 저장하고, 임계치를 집계해 알람을 보내게 했다.
#### 💡 느낀 점
- 대용량 트래픽 환경에서 실시간성을 보장하기 위해 아키텍쳐 변경과 기술 도입을 해서 문제를 해결하는 것을 보고 인상 깊었다.
- 최대 로그 유입 인스턴스를 기준으로 잡고 로그 유입이 폭등하는 상황까지 고려해서 TPS를 계산해 성능 테스트를 하는 것을 보고 성능 테스트 기준을 정하는 방식을 배울 수 있었다.
- 기존의 로그 규칙을 모두 매칭하는 비효율을 개선하기 위해 Elasticsearch의 Percolator를 사용해 해결한 부분이 인상 깊었다.
