## 📅 2025-04-28
### 📖 읽은 블로그: [LINE 소셜 네트워크 서비스의 아키텍처](https://d2.naver.com/helloworld/809802)
#### ✏️ 세 줄 요약
- 라인은 서비스가 가파르게 성장해 트래픽이 과도하게 발생했고, 이를 해결하기 위해 SNS 사용자의 데이터 사용 패턴을 분석해 아키텍쳐로 풀어냈다.
- Home, Timeline 등의 콘텐츠별로 인덱스를 떼어내어 별도로 모델링해 유연성을 높였다. 
- 홈은 그룹별 권한 필터링을 처리하기 위해 비트 비교 연산으로 구현했고, 타임라인은 Push 아키텍쳐와 Cassandra를 이용해 문제를 해결했다.
#### 💡 느낀 점
- B+트리의 개념을 모르고 있었는데, 찾아보니까 리프 노드들이 Linked List처럼 연결되어 있어서 범위 조회가 빠르고 트리 높이가 낮아 탐색이 log N에 수렴하는 것을 알게 됐다.
  - 그리고 범위가 너무 넓거나 리프 노드를 대량 순회해야 하는 경우 O(N)이 나올 수 있을 것 같다.
- 그룹에 맞는 복잡한 필터링을 하기위해 bit 연산을 하는 부분이 인상 깊었다. 이 부분을 보면서 bit의 순서가 바뀌면 안될 것 같다고 생각했다.
- '데이터 핫스폿을 고려해 사용자가 어떤 샤드에 저장되어 있는지 샤드 정보 데이터베이스에서 관리하는 아키텍쳐로 개발되었다.'라는 부분을 보고 어제 공부했던 게시판 인강이 생각났다.
  - Client 가 논리적 샤드를 기반으로 Router에 요청하면 물리적 샤드로 라우팅해준다고 했는데 비슷한 개념인 것 같았다. 
  - 샤드는 데이터가 배치되면 옮기는 비용이 크게 발생하는데 이러한 방식을 사용하면 유연하게 데이터를 옮길 수 있을 것 같다는 생각이 들었다.
- '친구가 천만명 이상일 경우 Fan-out 구조를 큐를 통해 파티션된 여러 워커에게 나눠주고 부하를 분산시키는 부분이 인상적이였다.

